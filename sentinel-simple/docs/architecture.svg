<svg width="1200" height="820" viewBox="0 0 1200 820" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="panel" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ffffff"/>
      <stop offset="100%" stop-color="#f7f9fc"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="#1a1a1a" flood-opacity="0.08"/>
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="10" markerHeight="10" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#3a3a3a"/>
    </marker>

    <!-- Simple icon set (kept minimal for crispness) -->
    <g id="ico-cloud"><ellipse cx="0" cy="0" rx="26" ry="14" fill="#dcecff"/><circle cx="-18" cy="-6" r="10" fill="#dcecff"/><circle cx="12" cy="-8" r="12" fill="#dcecff"/></g>
    <g id="ico-chip"><rect x="-22" y="-16" width="44" height="32" rx="6" fill="#b5a7ff"/><rect x="-14" y="-8" width="28" height="16" rx="4" fill="#efeaff"/></g>
    <g id="ico-shield"><path d="M0,-18 C10,-15 18,-10 18,0 C18,12 7,20 0,24 C-7,20 -18,12 -18,0 C-18,-10 -10,-15 0,-18 Z" fill="#48b07c"/></g>
    <g id="ico-magnifier"><circle cx="-4" cy="-4" r="12" fill="none" stroke="#6a7f98" stroke-width="4"/><rect x="4" y="4" width="12" height="6" rx="3" fill="#6a7f98" transform="rotate(45 4 4)"/></g>
    <g id="ico-db"><ellipse cx="0" cy="-6" rx="22" ry="8" fill="#6c8cff"/><rect x="-22" y="-6" width="44" height="32" rx="6" fill="#6c8cff"/><ellipse cx="0" cy="26" rx="22" ry="8" fill="#5a79ea"/></g>
    <g id="ico-gear"><circle cx="0" cy="0" r="12" fill="#ffd166"/><circle cx="0" cy="0" r="4" fill="#fff"/></g>
    <g id="ico-chart"><rect x="-22" y="-14" width="44" height="28" rx="4" fill="#e3f2ff" stroke="#5aa1ff"/><rect x="-14" y="0" width="8" height="10" fill="#5aa1ff"/><rect x="-2" y="-4" width="8" height="14" fill="#5aa1ff"/><rect x="10" y="-8" width="8" height="18" fill="#5aa1ff"/></g>
  </defs>

  <style>
    .title{font:600 24px Inter,Arial,sans-serif;fill:#222}
    .subtitle{font:400 14px Inter,Arial,sans-serif;fill:#666}
    .lane{fill:url(#panel);rx:16;filter:url(#shadow)}
    .card{fill:#fff;stroke:#e7e9f1;rx:12}
    .label{font:600 16px Inter,Arial,sans-serif;fill:#1e1e1e}
    .sublabel{font:400 12px Inter,Arial,sans-serif;fill:#6a6a6a}
  </style>

  <!-- Title -->
  <text class="title" x="600" y="40" text-anchor="middle">Reliable SQL Agent — Verifier-Guided Answering</text>
  <text class="subtitle" x="600" y="64" text-anchor="middle">Answers only when verified; otherwise a small repair or a clear stop.</text>

  <!-- Lanes -->
  <rect class="lane" x="40" y="88" width="1120" height="150"/>
  <text class="sublabel" x="60" y="110">API &amp; Orchestration</text>

  <rect class="lane" x="40" y="258" width="1120" height="240"/>
  <text class="sublabel" x="60" y="280">Agent Core</text>

  <rect class="lane" x="40" y="518" width="1120" height="180"/>
  <text class="sublabel" x="60" y="540">Data • Evaluation • Observability</text>

  <!-- Top row: Client -> API -> Policy -->
  <g transform="translate(140,140)">
    <rect class="card" x="-80" y="-40" width="220" height="110"/>
    <use href="#ico-cloud" transform="translate(-54,14)"/>
    <text class="label" x="30" y="-8">Client</text>
    <text class="sublabel" x="30" y="14">CLI / UI / Demo</text>
  </g>

  <g transform="translate(480,140)">
    <rect class="card" x="-100" y="-40" width="250" height="110"/>
    <use href="#ico-chip" transform="translate(-72,10)"/>
    <text class="label" x="20" y="-8">FastAPI</text>
    <text class="sublabel" x="20" y="14">/solve_sql • /healthz</text>
  </g>

  <g transform="translate(900,140)">
    <rect class="card" x="-120" y="-40" width="280" height="110"/>
    <use href="#ico-gear" transform="translate(-90,10)"/>
    <text class="label" x="-30" y="-8">Policy Controller</text>
    <text class="sublabel" x="-30" y="14">budgets • retries • routing</text>
  </g>

  <!-- Connectors (no overlaps) -->
  <path d="M300,140 L360,140" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>
  <path d="M620,140 L780,140" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>

  <!-- Down arrow from Policy to Generator -->
  <path d="M900,195 L900,240" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>

  <!-- Second row cards: Generator, Guardrails, Verifier, Oracle -->
  <g transform="translate(280,330)">
    <rect class="card" x="-120" y="-50" width="260" height="140"/>
    <use href="#ico-chip" transform="translate(-90,0)"/>
    <text class="label" x="-20" y="-12">Generator</text>
    <text class="sublabel" x="-20" y="10">Mock now; swap for LLM</text>
    <text class="sublabel" x="-20" y="32">OpenAI / Gemini / HF</text>
  </g>

  <g transform="translate(560,330)">
    <rect class="card" x="-120" y="-50" width="260" height="140"/>
    <use href="#ico-shield" transform="translate(-90,0)"/>
    <text class="label" x="-20" y="-12">Guardrails</text>
    <text class="sublabel" x="-20" y="10">deny DROP / DELETE / UPDATE</text>
    <text class="sublabel" x="-20" y="32">token &amp; step budgets</text>
  </g>

  <g transform="translate(840,330)">
    <rect class="card" x="-120" y="-50" width="260" height="140"/>
    <use href="#ico-magnifier" transform="translate(-90,0)"/>
    <text class="label" x="-20" y="-12">Verifier</text>
    <text class="sublabel" x="-20" y="10">execute SQL &amp; compare</text>
    <text class="sublabel" x="-20" y="32">learned verifier later</text>
  </g>

  <g transform="translate(1080,330)">
    <rect class="card" x="-120" y="-50" width="220" height="140"/>
    <use href="#ico-db" transform="translate(-90,4)"/>
    <text class="label" x="-20" y="-12">Oracle</text>
    <text class="sublabel" x="-20" y="10">DuckDB</text>
  </g>

  <!-- Core connectors -->
  <path d="M420,330 L440,330" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>
  <path d="M700,330 L720,330" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>
  <path d="M980,330 L1000,330" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>
  <!-- Oracle back to Verifier (result) using curved path below to avoid overlap -->
  <path d="M1090,390 C1090,420 940,420 940,390" fill="none" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>

  <!-- Back to Policy (final decision) using elbow path above -->
  <path d="M840,280 C840,240 900,240 900,240" fill="none" stroke="#3a3a3a" stroke-width="2.5" marker-end="url(#arrow)"/>

  <!-- Bottom row -->
  <g transform="translate(280,600)">
    <rect class="card" x="-140" y="-50" width="280" height="120"/>
    <use href="#ico-db" transform="translate(-108,2)"/>
    <text class="label" x="-54" y="-10">Data</text>
    <text class="sublabel" x="-54" y="12">demo.duckdb (seeded)</text>
  </g>

  <g transform="translate(600,600)">
    <rect class="card" x="-140" y="-50" width="280" height="120"/>
    <use href="#ico-gear" transform="translate(-108,2)"/>
    <text class="label" x="-54" y="-10">Evaluation</text>
    <text class="sublabel" x="-54" y="12">offline tests &amp; report</text>
  </g>

  <g transform="translate(920,600)">
    <rect class="card" x="-140" y="-50" width="280" height="120"/>
    <use href="#ico-chart" transform="translate(-108,2)"/>
    <text class="label" x="-54" y="-10">Observability</text>
    <text class="sublabel" x="-54" y="12">/metrics (Prometheus)</text>
    <text class="sublabel" x="-54" y="34">Grafana (optional)</text>
  </g>
</svg>

